(()=>{"use strict";const e={elem:document.querySelector(".layer-editor-wrapper"),isOpen:!1,hide(){this.elem.classList.remove("open"),this.isOpen=!1},open(){this.elem.classList.add("open"),this.isOpen=!0}},t={elem:document.querySelector(".menu__edit-layers"),isOpen:!1,init(){this.getLayersList().forEach((e=>{e.addEventListener("click",this.listItemClickHandler)}))},hide(){this.elem.classList.remove("open"),this.isOpen=!1},open(){this.elem.classList.add("open"),this.isOpen=!0},getLayersList(){return this.elem.querySelectorAll(".layers-list__layer-item")},listItemClickHandler(s){e.open(),t.hide()}},s={elem:document.querySelector(".menu__edit-options"),isOpen:!0,hide(){this.elem.classList.remove("open"),this.isOpen=!1},open(){this.elem.classList.add("open"),this.isOpen=!0}},r={elem:document.querySelector("#editor-toggle"),optionsBtn:document.querySelector("#editor-toggle span.editor-toggle__options"),layersBtn:document.querySelector("#editor-toggle span.editor-toggle__layers"),slider:document.querySelector("#editor-toggle .editor-toggle__slider"),init(){this.layersBtn.addEventListener("click",this.switchMode.bind(this)),this.optionsBtn.addEventListener("click",this.switchMode.bind(this)),t.init()},switchMode(r){const n=r.currentTarget.dataset.mode,l=this.elem.dataset.selectedMode;n!==l&&(this.elem.dataset.selectedMode=n,this.slider.classList.remove(l),this.slider.classList.add(n),"options"==n&&(s.open(),t.hide(),e.hide()),"layers"==n&&(s.hide(),t.open()))}};document.querySelectorAll("form button").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault()}))})),document.documentElement.style.setProperty("--heder-height",document.getElementById("header-panel").clientHeight),function(e){let t=new Image;t.onload=t.onerror=function(){(e=>{let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),(()=>{const e=document.querySelector(".header-panel__func-btns"),t=e=>{const t=e.target,s=e.currentTarget;s.querySelector(".selected")?.classList.remove("selected"),t.classList.toggle("selected")};document.querySelector(".header-panel__preview-modes").addEventListener("click",t),e.addEventListener("click",t)})(),(()=>{const e=document.getElementsByClassName("workspace__canvas")[0],t=document.querySelector(".workspace__size-button#bigger"),s=document.querySelector(".workspace__size-button#smaller"),r=document.querySelector(".workspace__select-size"),n=document.querySelector(".select-size__dropdown"),l=t=>{"bigger"==t.currentTarget.id?(e.style.setProperty("--set-scale",+getComputedStyle(e).scale+.2),r.querySelector("span").textContent=`${Math.max(Math.floor(100*(+getComputedStyle(e).scale+.2)),0)}%`):(e.style.setProperty("--set-scale",+getComputedStyle(e).scale-.2),r.querySelector("span").textContent=`${Math.max(Math.floor(100*(+getComputedStyle(e).scale-.2)),0)}%`)};t.addEventListener("click",l),s.addEventListener("click",l),e.addEventListener("mousedown",(e=>{const t=()=>{r.removeEventListener("mousemove",s),document.removeEventListener("mouseup",t)},s=e=>{let t=e.clientX-n,s=e.clientY-l;r.style.setProperty("--drag-position",`${c+t}px ${o+s}px`)},r=e.currentTarget;let n=e.clientX,l=e.clientY,c=+getComputedStyle(r).translate.split(" ")[0].replace("px",""),o=+getComputedStyle(r).translate.split(" ")[1].replace("px","");r.addEventListener("mousemove",s),document.addEventListener("mouseup",t)}));const c=t=>{e.style.setProperty("--set-scale",+t.currentTarget.textContent.replace("%","")/100),e.style.setProperty("--drag-position","1px 1px"),r.querySelector("span").textContent=t.currentTarget.textContent};r.addEventListener("click",(e=>{n.classList.contains("open")?(n.classList.remove("open"),setTimeout((()=>{n.style.display="none"}),300)):(n.style.display="block",setTimeout((()=>{n.classList.add("open")}),50))})),[...n.children].forEach((e=>{e.addEventListener("click",c)}))})(),(()=>{const e=document.querySelector("#header-panel");addEventListener("scroll",(()=>{0!=scrollY?e.classList.add("scrolled"):e.classList.remove("scrolled")}))})(),(()=>{const e=document.querySelectorAll(".gallery-item"),t=document.querySelector(".workspace__canvas img");e.forEach((s=>{s.addEventListener("click",(s=>{const r=s.currentTarget;e[0].parentElement.querySelector(".selected").classList.remove("selected"),r.classList.add("selected"),t.setAttribute("src",r.children[0].src)}))}))})(),(()=>{let e=document.querySelectorAll(".steps__tab");const t=document.querySelector("#add-step-button"),s=document.querySelector(".steps__wrapper"),r=t=>{if(e=document.querySelectorAll(".steps__tab"),t.currentTarget.classList.contains("selected"))return void t.currentTarget.setAttribute("contenteditable","true");t.currentTarget.parentElement.querySelector(".selected").removeAttribute("contenteditable"),t.currentTarget.parentElement.querySelector(".selected").classList.remove("selected"),t.currentTarget.classList.add("selected");let r=t.currentTarget.id.split("_")[1];s.querySelector(".open").classList.remove("open"),s.children[r-1].classList.add("open")};e.forEach((e=>{e.addEventListener("click",r)})),t.addEventListener("click",(e=>{let t=document.querySelectorAll(".steps__tab").length;const n=document.createElement("li");n.classList.add("steps__tab"),n.id=`steps-tab_${t+1}`,n.textContent=`Step ${t+1}`,n.addEventListener("click",r),e.currentTarget.insertAdjacentElement("beforebegin",n);const l=document.createElement("div");l.classList.add("steps__step-content"),l.id=`steps-content_${t+1}`,s.insertAdjacentElement("beforeend",l),n.click()}))})(),r.init()})();